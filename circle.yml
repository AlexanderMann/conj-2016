dependencies:
  cache_directories:
    - /home/ubuntu/.cache/pip
    - /home/ubuntu/.cache/wheelhouse
  pre:
    - sudo apt-get install tk-dev python-tk
    - pip install --upgrade pip
    - pip install wheel
    - pip wheel --find-links=/home/ubuntu/.cache/wheelhouse --wheel-dir=/home/ubuntu/.cache/wheelhouse numpy
    - pip wheel --find-links=/home/ubuntu/.cache/wheelhouse --wheel-dir=/home/ubuntu/.cache/wheelhouse matplotlib
    - pip install --user --use-wheel --no-index --find-links=/home/ubuntu/.cache/wheelhouse numpy matplotlib:
        timeout: 1200

test:
  pre:
    - export PATH=$(echo $PATH | sed -e 's/\/[^:]*\.pyenv\/[a-z]*\://g')
    - which python
    - python --version
    - python -c "help('modules')"
    - python -c 'import Tkinter;'
